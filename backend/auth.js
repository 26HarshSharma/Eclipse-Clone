import{initializeApp as e}from"https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";import{getStorage as t,ref as a,uploadBytes as s,getDownloadURL as l}from"https://www.gstatic.com/firebasejs/10.1.0/firebase-storage.js";import{getAnalytics as n}from"https://www.gstatic.com/firebasejs/10.1.0/firebase-analytics.js";import{getAuth as i,createUserWithEmailAndPassword as r,signInWithEmailAndPassword as o}from"https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";import{getFirestore as d,collection as u,addDoc as m}from"https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";let firebaseConfig={apiKey:"AIzaSyBAMn46OvYvoxI1STttMBW2QQzNMkVK3QI",authDomain:"fir-38a44.firebaseapp.com",databaseURL:"https://fir-38a44-default-rtdb.europe-west1.firebasedatabase.app",projectId:"fir-38a44",storageBucket:"fir-38a44.appspot.com",messagingSenderId:"964306008147",appId:"1:964306008147:web:442519f6ed3319679eaea6",measurementId:"G-XQP42QYYH5"},app=e(firebaseConfig),analytics=n(app),auth=i(),storage=t(),fireDB=d(),storageRef,colref=u(fireDB,"customer"),signup=document.getElementById("sign-up"),login=document.getElementById("log-in"),getFile=document.getElementById("pic"),file,profileDownloadURL="";async function addCustomer(e,t,a,s){m(colref,{id:e,Name:t,Contact:a,Address:s})}async function store(e){try{await s(storageRef=a(storage,`images/${e}`),file),l(storageRef).then(e=>{profileDownloadURL=e,console.log(e)}),console.log("File uploaded successfully.")}catch(t){console.error("Error uploading file:",t)}}getFile.addEventListener("change",e=>{file=e.target.files[0]}),signup.addEventListener("click",e=>{e.preventDefault();let t=document.getElementById("exampleInputEmail1").value,a=document.getElementById("exampleInputPassword1").value,s=document.getElementById("name").value,l=document.getElementById("address").value,n=document.getElementById("contact-number").value,i;document.getElementById("exampleInputEmail1").value="",document.getElementById("exampleInputPassword1").value="",document.getElementById("name").value="",document.getElementById("address").value="",document.getElementById("contact-number").value="",r(auth,t,a).then(e=>{i=e.user.uid,document.getElementById("user-created").style.display="block",setTimeout(function(){document.getElementById("user-created").style.display="none"},3e3),store(i),addCustomer(i,s,n,l)}).catch(e=>{"auth/email-already-in-use"==e.code&&(document.getElementById("user-exists").style.display="block",setTimeout(function(){document.getElementById("user-exists").style.display="none"},3e3))}),getFile.value=""}),login.addEventListener("click",e=>{e.preventDefault();let t=document.getElementById("exampleInputEmail2").value,a=document.getElementById("exampleInputPassword2").value;document.getElementById("exampleInputEmail2").value="",document.getElementById("exampleInputPassword2").value="",o(auth,t,a).then(e=>{e.user,document.getElementById("user-loggedin").style.display="block",setTimeout(function(){document.getElementById("user-loggedin").style.display="none"},3e3)}).catch(e=>{let t=e.code;"auth/user-not-found"==t&&(document.getElementById("user-invalid").style.display="block",setTimeout(function(){document.getElementById("user-invalid").style.display="none"},3e3)),"auth/wrong-password"==t&&(document.getElementById("user-invalid-password").style.display="block",setTimeout(function(){document.getElementById("user-invalid-password").style.display="none"},3e3))})});